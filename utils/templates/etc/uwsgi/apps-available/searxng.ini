# -*- mode: conf; coding: utf-8  -*-
[uwsgi]

#################################
# 🌍 Environment Setup
#################################
env = LANG=C.UTF-8
env = LANGUAGE=C.UTF-8
env = LC_ALL=C.UTF-8

#################################
# 📂 App Paths
#################################
# غيرنا الـ chdir عشان يروح على فولدر المشروع مباشرة
chdir = /app/searx

# مسار ملف الإعدادات
env = SEARXNG_SETTINGS_PATH=${SEARXNG_SETTINGS_PATH}

#################################
# ⚙️ Logging & Permissions
#################################
disable-logging = true
chmod-socket = 666

#################################
# ⚡ uWSGI Core Settings
#################################
single-interpreter = true
master = true
lazy-apps = true
plugin = python3,http
enable-threads = true

#################################
# 🧵 Workers & Threads
#################################
# عدد الـ workers ثابت أو من Environment
workers = 4
threads = 4

#################################
# 🐍 Python & Virtualenv
#################################
module = searx.webapp
virtualenv = /app/.venv
pythonpath = /app

#################################
# 🌐 HTTP Binding
#################################
# ربط على 0.0.0.0 وعلى الـ PORT اللي Railway بيبعته
http = 0.0.0.0:${PORT}
buffer-size = 8192
offload-threads = %k
